{"remainingRequest":"/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/node_modules/babel-loader/lib/index.js!/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/src/store/modules/auth/actions.js","dependencies":[{"path":"/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/src/store/modules/auth/actions.js","mtime":1630279350754},{"path":"/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFVzZXIgZnJvbSAiLi4vLi4vLi4vYXBpcy91c2VyIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi8uLi9yb3V0ZXIvaW5kZXgiOyAvL0xvZ2luCgpleHBvcnQgdmFyIGxvZ2luID0gZnVuY3Rpb24gbG9naW4oX3JlZiwgY3JlZGVudGlhbHMpIHsKICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgY29tbWl0KCdTRVRfTE9BRElORycsIHRydWUpOwogIGNvbW1pdCgnQ0xFQVJfT1RIRVJfRVJST1JTJyk7CiAgVXNlci5sb2dpbihjcmVkZW50aWFscykudGhlbihmdW5jdGlvbiAoKSB7CiAgICBjb25zb2xlLmxvZygiSU4gQVVUSCIpOwogICAgVXNlci5hdXRoKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29tbWl0KCdTRVRfVVNFUkRBVEEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgY29tbWl0KCdTRVRfQVVUSEVOVElDQVRFRCcsIHRydWUpOwogICAgICBjb21taXQoJ1NFVF9BVVRIX0VSUk9SUycsIG51bGwpOwogICAgICBjb21taXQoJ1NFVF9MT0FESU5HJywgZmFsc2UpOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2Rhc2hib2FyZCcKICAgICAgfSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coIkF1dGggY2F0Y2ggPT0+IiArIGVycm9yKTsKICAgICAgZXJyb3IgPSBlcnJvciArICIuIFByb2Jsw6htZSBkZSBjb25uZXhpb24gYXZlYyBsZSBzZXJ2ZXVyLiI7CiAgICAgIGNvbW1pdCgnU0VUX09USEVSX0VSUk9SUycsIGVycm9yKTsKICAgICAgY29tbWl0KCdTRVRfVVNFUkRBVEEnLCBudWxsKTsKICAgICAgY29tbWl0KCdTRVRfQVVUSEVOVElDQVRFRCcsIGZhbHNlKTsKICAgICAgY29tbWl0KCdTRVRfTE9BRElORycsIGZhbHNlKTsKICAgIH0pOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5sb2coIkxvZ2luIGNhdGNoICIgKyBlcnJvcik7CiAgICBjb21taXQoJ1NFVF9VU0VSREFUQScsIG51bGwpOwogICAgY29tbWl0KCdTRVRfQVVUSEVOVElDQVRFRCcsIGZhbHNlKTsKCiAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQyMikgewogICAgICAgIGNvbW1pdCgnU0VUX0FVVEhfRVJST1JTJywgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBlcnJvcl9tZXNzYWdlID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzICsgIiAiICsgZXJyb3IucmVzcG9uc2Uuc3RhdHVzVGV4dDsKICAgICAgICBjb21taXQoJ1NFVF9PVEhFUl9FUlJPUlMnLCBlcnJvcl9tZXNzYWdlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZXJyb3IgPSBlcnJvciArICIuIFByb2Jsw6htZSBkZSBjb25uZXhpb24gYXZlYyBsZSBzZXJ2ZXVyLiI7CiAgICAgIGNvbW1pdCgnU0VUX09USEVSX0VSUk9SUycsIGVycm9yKTsKICAgIH0KCiAgICBjb21taXQoJ1NFVF9MT0FESU5HJywgZmFsc2UpOwogIH0pOwp9OyAvL0xvZ291dAoKZXhwb3J0IHZhciBsb2dvdXQgPSBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogIGNvbW1pdCgnU0VUX0xPR09VVF9MT0FESU5HJywgdHJ1ZSk7CiAgY29tbWl0KCdDTEVBUl9PVEhFUl9FUlJPUlMnKTsKICBVc2VyLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgY29tbWl0KCdTRVRfTE9HT1VUX0xPQURJTkcnLCBmYWxzZSk7CiAgICBjb21taXQoJ1NFVF9VU0VSREFUQScsIG51bGwpOwogICAgY29tbWl0KCdTRVRfQVVUSEVOVElDQVRFRCcsIGZhbHNlKTsKICAgIGNvbW1pdCgnU0VUX0FVVEhfRVJST1JTJywgbnVsbCk7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdsb2dpbicKICAgIH0pOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29tbWl0KCdTRVRfTE9HT1VUX0xPQURJTkcnLCBmYWxzZSk7CiAgICBjb25zb2xlLmxvZygnTE9HT1VUIEVyciA9PT4nICsgZXJyb3IpOwoKICAgIGlmIChlcnJvci5yZXNwb25zZSAhPSB1bmRlZmluZWQpIHsKICAgICAgdmFyIGVycm9yX21lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5zdGF0dXMgKyAiICIgKyBlcnJvci5yZXNwb25zZS5zdGF0dXNUZXh0ICsgIi4gUHJvYmzDqG1lIGRlIGNvbm5leGlvbiBhdmVjIGxlIHNlcnZldXIuIjsKICAgICAgY29tbWl0KCdTRVRfT1RIRVJfRVJST1JTJywgZXJyb3JfbWVzc2FnZSk7CiAgICB9IGVsc2UgewogICAgICBlcnJvciA9IGVycm9yICsgIi4gUHJvYmzDqG1lIGRlIGNvbm5leGlvbiBhdmVjIGxlIHNlcnZldXIuIjsKICAgICAgY29tbWl0KCdTRVRfT1RIRVJfRVJST1JTJywgZXJyb3IpOwogICAgfQogIH0pOwp9OwpleHBvcnQgdmFyIGlzX2F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiBpc19hdXRoZW50aWNhdGVkKF9yZWYzKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICBjb21taXQoJ0lTX0FVVEhFTlRJQ0FURUQnKTsKfTs="},{"version":3,"sources":["/home/khalil/Projects/PFE/scrapy_app/vuejs_frontend/src/store/modules/auth/actions.js"],"names":["User","router","login","credentials","commit","then","console","log","auth","response","data","push","name","catch","error","undefined","status","errors","error_message","statusText","logout","is_authenticated"],"mappings":"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","sourcesContent":["import User from \"../../../apis/user\";\r\nimport router from \"../../../router/index\"\r\n\r\n\r\n//Login\r\nexport const login = ({ commit }, credentials) => {\r\n\r\n    commit('SET_LOADING',true)\r\n    commit('CLEAR_OTHER_ERRORS')\r\n\r\n    User.login(credentials).then(() => {\r\n        console.log(\"IN AUTH\")\r\n        User.auth().then(response => {\r\n        commit('SET_USERDATA', response.data);\r\n        commit('SET_AUTHENTICATED',true);\r\n        commit('SET_AUTH_ERRORS',null);\r\n        commit('SET_LOADING',false)\r\n        router.push({ name: 'dashboard' });\r\n        }).catch((error) => {\r\n            console.log(\"Auth catch ==>\"+error)\r\n            error = error+\". Problème de connexion avec le serveur.\"\r\n            commit('SET_OTHER_ERRORS',error)\r\n            commit('SET_USERDATA', null);\r\n            commit('SET_AUTHENTICATED',false);\r\n            commit('SET_LOADING',false);\r\n        })\r\n    })\r\n    .catch((error) => {\r\n        console.log(\"Login catch \"+error)\r\n        commit('SET_USERDATA', null);\r\n        commit('SET_AUTHENTICATED',false);\r\n        if(error.response != undefined)\r\n        {\r\n            if (error.response.status === 422) {\r\n                commit('SET_AUTH_ERRORS',error.response.data.errors)\r\n            }\r\n            else{\r\n                let error_message = error.response.status+\" \"+error.response.statusText\r\n                commit('SET_OTHER_ERRORS',error_message)\r\n            }\r\n        }\r\n        else\r\n        {\r\n            error = error+\". Problème de connexion avec le serveur.\"\r\n            commit('SET_OTHER_ERRORS',error)\r\n        }\r\n        commit('SET_LOADING',false)\r\n    })\r\n    \r\n}\r\n\r\n//Logout\r\nexport const logout = ({commit}) => {\r\n    commit('SET_LOGOUT_LOADING',true)\r\n    commit('CLEAR_OTHER_ERRORS')\r\n    User.logout().then(() => {\r\n        commit('SET_LOGOUT_LOADING',false)\r\n        commit('SET_USERDATA', null);\r\n        commit('SET_AUTHENTICATED', false);\r\n        commit('SET_AUTH_ERRORS',null);\r\n        router.push({ name: 'login' });\r\n    })\r\n    .catch((error) => {\r\n        commit('SET_LOGOUT_LOADING',false)\r\n        console.log('LOGOUT Err ==>' + error)\r\n        if(error.response != undefined)\r\n        {\r\n            let error_message = error.response.status+\" \"+error.response.statusText+\". Problème de connexion avec le serveur.\"\r\n            commit('SET_OTHER_ERRORS',error_message)\r\n        }\r\n        else\r\n        {\r\n            error = error+\". Problème de connexion avec le serveur.\"\r\n            commit('SET_OTHER_ERRORS',error)\r\n        }\r\n    })\r\n}\r\n\r\nexport const is_authenticated = ({commit}) => {\r\n    commit('IS_AUTHENTICATED')\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]}]}